<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.js'></script>
    <link href='https://api.mapbox.com/mapbox.js/v2.2.2/mapbox.css' rel='stylesheet' />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script src="leaflet-heat.js" charset="utf-8"></script>
    <script src="ui.js" charset="utf-8"></script>
    <script src="walkers.js" charset="utf-8"></script>
    <style media="screen">
      html, body {
        margin: 0;
        padding: 0;
      }
      .branding {
        position: fixed;
        top: 0;
        right: 0;
        left: 0;
        height: 20vh;
        /*background-color: #FFF;*/
        background-color: #0A7A06;
        opacity: 0.8;
        line-height: 20vh;
        font-size: 10vh;
        text-align: center;
        font-family: sans-serif;
        color: #FFF;
        /*color: #767;*/
      }
      .menu {
        position: fixed;
        top: 20vh;
        right: 0;
        left: 0;
        height: 10vh;
        text-align: center;
        line-height: 5vh;
      }
    </style>
  </head>
  <body>
    <div id="map" style="width: 100vw; height: 100vh"></div>
    <div class="branding">BaaS: Beer as a Service</div>
    <div class="menu" style="display: none">
      <button class='toggleHeat'>BaaS Data Services</button>
      <button class='wipeHeat'>Wipe</button>
    </div>

    <script>
      L.mapbox.accessToken = 'pk.eyJ1IjoianVpY2UxMCIsImEiOiJjaWdlNXFtb28zdzFldmJtOGRkNnFlMnY5In0.72hyCbe4AfMONitVc23VSg';
      var map = L.mapbox.map('map', 'juice10.o1h6ah72');
      var beerHeat = L.heatLayer([]).addTo(map);
      var customerHeat = L.heatLayer([], {gradient: {0: 'purple', 0.5: 'lightpink', 1: 'white'}}).addTo(map);
      map.on('move', function () { console.log('hi', arguments, this); });

      walk(
        [[52.387418, 4.871452], [52.387458, 4.871472], [52.387518, 4.871472], [52.387558, 4.871472], [52.387560, 4.871402]],
        map,
        {isLoop: true}
      );

      walk(
        [[52.387418, 4.871452], [52.387458, 4.871472], [52.387518, 4.871472], [52.387558, 4.871472], [52.387560, 4.871402], [52.387600, 4.871352]],
        map,
        {isLoop: true, modifier: [-0.00025, 0.00115]}
      );

      walk(
        [[52.387418 - 0.0003, 4.871452 - 0.00005], [52.387458 - 0.0003, 4.871472 - 0.00005], [52.387518 - 0.0003, 4.871472 - 0.00005], [52.387558 - 0.0003, 4.871472 - 0.00015]],
        map,
        {isLoop: true, temp: 'cold'}
      );

      walk(
        [[52.387418 - 0.0003, 4.871452 - 0.00005], [52.387458 - 0.0003, 4.871472 - 0.00005], [52.387518 - 0.0003, 4.871472 - 0.00005], [52.387558 - 0.0003, 4.871472 - 0.00015]].reverse(),
        map,
        {isLoop: true, temp: 'warm', modifier: [-0.0004, 0.00025]}
      );

      walk(
        [[52.386808, 4.871102], [52.386818, 4.871252], [52.386818, 4.871452], [52.386818, 4.871652], [52.386818, 4.871852], [52.386818, 4.872052], [52.386818, 4.872252], [52.386818, 4.872452], [52.386818, 4.872652], [52.386818, 4.872852], [52.386818, 4.873052], [52.386818, 4.873252]].reverse(),
        map,
        {isLoop: true, temp: 'cold'}
      );

      var sequence = [[52.386818, 4.871052], [52.386828, 4.871102]];
      walk(sequence, map, {marker: 'customer', isLoop: true});
    </script>
  </body>
</html>
